function mostrarResultados(t){var e="tag0="+encodeURI($("#grado").val())+"&tag1="+encodeURI($("#asig").val())+"&tag2="+encodeURI($("#anio").val())+"&tag3="+encodeURI($("#curso").val())+"&page="+t;$.getJSON("./php/getter.php",e,function(e,o){"success"==o&&(1==t&&$("#lista").empty(),e.num_r>0?$.each(e,function(t,e){if("num_r"!=t&&null!=e){var o=encodeURI(e+"/"+t);$("#lista").append("<li><a href="+o+' target="_blank">'+t+"</a></li>")}}):($("#lista").empty(),$("#lista").append("<li><a>No se encontraron resultados</a></li>")))})}function autocompletar(t,e){$("#"+t).autocomplete({autoFocus:!0,minLength:0,create:function(o,a){$("#"+t).val(""),$.getJSON("./php/tagger.php","caller="+t,function(t,o){"success"==o&&(e=t)})},source:function(t,o){cache=e;var a=$.ui.autocomplete.escapeRegex(t.term),n=new RegExp("^"+a.replace(/[aeiouáéíóú]/gi,"[aeiouáéíóú]"),"i");o($.grep(cache,function(t){return n.test(t)}))},change:function(){setTimeout(function(){mostrarResultados(1)},50)},select:function(){setTimeout(function(){mostrarResultados(1)},50)}})}$(document).ready(function(){$("button#up").hide(),$("#lista").append("<li><a>Los resultados se mostrarán aquí</a></li>");var t,e,o,a;autocompletar("grado",t),autocompletar("asig",e),autocompletar("anio",o),autocompletar("curso",a),$("button#up").on("click",function(){$("html, body").animate({scrollTop:0},"slow")});var n=1;$(window).scroll(function(){$(window).scrollTop()>=$(document).height()-$(window).height()-10&&($("button#up").show(),mostrarResultados(++n))})});