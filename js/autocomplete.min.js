function mostrarResultados(a){var t="tag0="+encodeURI($("#grado").val())+"&tag1="+encodeURI($("#asig").val())+"&tag2="+encodeURI($("#anio").val())+"&tag3="+encodeURI($("#curso").val())+"&page="+a;$.getJSON("./php/getter.php",t,function(t,e){"success"==e&&(1==a&&$("#lista").empty(),t.num_r>0?$.each(t,function(a,t){if("num_r"!=a&&null!=t){var e=encodeURI(t+"/"+a);$("#lista").append("<li><a href="+e+' target="_blank">'+a+"</a></li>")}}):($("#lista").empty(),$("#lista").append("<li><a>No se encontraron resultados</a></li>")))})}function autocompletar(a,t){$("#"+a).autocomplete({autoFocus:!0,minLength:1,create:function(e,o){$("#"+a).val(""),$.getJSON("./php/tagger.php","caller="+a,function(a,e){"success"==e&&(t=a)})},source:function(a,e){cache=t;var o=$.ui.autocomplete.escapeRegex(a.term),n=new RegExp("^"+o.replace(/[aeiouáéíóú]/gi,"[aeiouáéíóú]"),"i");e($.grep(cache,function(a){return n.test(a)}))},change:function(){pag=1,setTimeout(function(){mostrarResultados(pag)},50)},select:function(){pag=1,setTimeout(function(){mostrarResultados(pag)},50)}})}var pag=1;$(document).ready(function(){$("button#up").hide(),$("#lista").append("<li><a>Los resultados se mostrarán aquí</a></li>");var a,t,e,o;autocompletar("grado",a),autocompletar("asig",t),autocompletar("anio",e),autocompletar("curso",o),$("button#up").on("click",function(){$("html, body").animate({scrollTop:0},"fast")}),$(window).scroll(function(){$(window).scrollTop()>=$(document).height()-$(window).height()-20&&pag<50&&($("button#up").show(),mostrarResultados(++pag))})});