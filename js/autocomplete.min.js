function mostrarResultados(a){var o="tag0="+encodeURI($("#grado").val())+"&tag1="+encodeURI($("#asig").val())+"&tag2="+encodeURI($("#anio").val())+"&tag3="+encodeURI($("#curso").val())+"&page="+a;$.getJSON("/BDExamenes/php/getter.php",o,function(o){1==a&&$("#lista").empty(),o.num_r>0?$.each(o,function(a,o){if("num_r"!=a&&null!=o){var e=encodeURI(o+"/"+a);$("#lista").append("<li><a href="+e+' target="_blank">'+a+"</a></li>")}}):$("#lista").append("<li><a>No se encontraron resultados</a></li>")})}function autocompletar(a){var o="&caller="+a;switch(a){case"grado":o+="&tag0="+encodeURI($("#curso").val())+"&tag1="+encodeURI($("#asig").val())+"&tag2="+encodeURI($("#anio").val());break;case"asig":o+="&tag0="+encodeURI($("#curso").val())+"&tag1="+encodeURI($("#grado").val())+"&tag2="+encodeURI($("#anio").val());break;case"anio":o+="&tag0="+encodeURI($("#curso").val())+"&tag1="+encodeURI($("#asig").val())+"&tag2="+encodeURI($("#grado").val());break;case"curso":o+="&tag0="+encodeURI($("#grado").val())+"&tag1="+encodeURI($("#asig").val())+"&tag2="+encodeURI($("#anio").val())}$("#"+a).autocomplete({source:function(a,e){$.getJSON("/BDExamenes/php/tagger.php","term="+a.term+o,e)},select:function(){setTimeout(function(){mostrarResultados(1)},50)},open:function(a,o){var e=$(this).data("ui-autocomplete");e.menu.element.find("li").each(function(){var a=$(this),o=e.term.split(" ").join("|");a.html(a.text().replace(new RegExp("("+o+")","gi"),"<b>$1</b>"))})}})}$(document).ready(function(){$("#lista").append("<li><a>Los resultados se mostrarán aquí</a></li>"),$("#grado").val(""),$("#grado").on("autocompleteselect",function(a,o){}),$("#grado").on("input",function(){autocompletar("grado"),mostrarResultados(1)}),$("#asig").val(""),$("#asig").on("autocompleteselect",function(a,o){}),$("#asig").on("input",function(){autocompletar("asig"),mostrarResultados(1)}),$("#anio").val(""),$("#anio").on("autocompleteselect",function(a,o){}),$("#anio").on("input",function(){autocompletar("anio"),mostrarResultados(1)}),$("#curso").val(""),$("#curso").on("autocompleteselect",function(a,o){}),$("#curso").on("input",function(){autocompletar("curso"),mostrarResultados(1)});var a=1;$(window).scroll(function(){$(document).height()-$(window).height()==$(window).scrollTop()&&mostrarResultados(++a)})});