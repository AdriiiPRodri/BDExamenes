function newOption(e){var n=document.createElement("option");return n.text=e,n}function uploadFile(e){var n="php/uploader.php",t=new XMLHttpRequest;t.open("POST",n,!0),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&genThumbnail(e,JSON.parse(t.responseText))};var a=new FormData;a.append("file",e),t.send(a)}function genThumbnail(e,n){var t=document.querySelector(".gallery"),a=document.createElement("div");a.classList.add("thumbnail");var i=document.createElement("img");i.classList.add("imgprop");var d=document.createElement("div");d.classList.add("div-image"),i.src="img/default.jpg",t.appendChild(a),d.appendChild(i),d.innerHTML=d.innerHTML+"<br>"+e.name,a.appendChild(d);var r=document.createElement("div");r.classList.add("div-select");var l=document.createElement("div");l.classList.add("div-buttons");var o=document.createElement("span");o.innerHTML="Asignatura: ";var c=document.createElement("select");for(var p in n.asig)c.add(newOption(n.asig[p]));o.appendChild(c),r.appendChild(o);var s=document.createElement("span");s.innerHTML="Año académico: ";var u=document.createElement("select");for(var p in n.anio)u.add(newOption(n.anio[p].toString()+(n.anio[p]+1).toString()));s.appendChild(u),r.appendChild(s),a.appendChild(r);var m=document.createElement("button");m.innerHTML="Subir",l.appendChild(m);var v=document.createElement("button");v.innerHTML="Eliminar",v.addEventListener("click",function(){this.parentElement.parentElement.style.display="none"}),l.appendChild(v),a.appendChild(l)}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#fileinput");e.addEventListener("change",function(){"Aquí se previsualizarán los archivos"==document.querySelector(".gallery").innerHTML&&(document.querySelector(".gallery").innerHTML="");var e=this.files;for(var n in e)console.log(e[n]),uploadFile(e[n])},!1)});